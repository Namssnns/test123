<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Monaco Lua Editor</title>

    <style>
        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden;
            background: #0d1117;
        }

        #editor {
            width: 100%;
            height: 100%;
        }
    </style>

    <!-- Monaco Loader -->
    <script>
        window.require = { paths: { vs: "https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs" } };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.min.js"></script>
</head>
<body>

<div id="editor"></div>

<script>
require(["vs/editor/editor.main"], function () {

    /* -----------------------------------------------------
       CUSTOM AMAZING COLOR THEME
    ------------------------------------------------------ */
    monaco.editor.defineTheme("amazingLuaTheme", {
    base: "vs-dark",
    inherit: true,
    rules: [
        { token: "comment", foreground: "5e8bff" },
        { token: "keyword", foreground: "ff7b72" },
        { token: "string", foreground: "6affb0" },
        { token: "number", foreground: "ffbd5e" },
        { token: "identifier", foreground: "9cdcfe" },
    ],
    colors: {
        "editor.background": "#161617",
        "editor.lineHighlightBackground": "#1d1d22aa",
        "editorCursor.foreground": "#64ffda",
        "editorLineNumber.foreground": "#4c669f",
        "editor.selectionBackground": "#2a2a33aa"
    }
});


    /* -----------------------------------------------------
       CUSTOM LUA COMPLETIONS
    ------------------------------------------------------ */
    monaco.languages.registerCompletionItemProvider("lua", {
        triggerCharacters: ["."],
        provideCompletionItems: function () {
            return {
                suggestions: [
                    {
                        label: "cache_invalidate",
                        kind: monaco.languages.CompletionItemKind.Function,
                        insertText: "cache_invalidate()",
                        documentation: "Cache::invalidate"
                    },
                    {
                        label: "cache_iscached",
                        kind: monaco.languages.CompletionItemKind.Function,
                        insertText: "cache_iscached()",
                        documentation: "Cache::iscached"
                    },
                    {
                        label: "cache_get",
                        kind: monaco.languages.CompletionItemKind.Function,
                        insertText: "cache_get()",
                        documentation: "Cache::get"
                    },
                    {
                        label: "cache_set",
                        kind: monaco.languages.CompletionItemKind.Function,
                        insertText: "cache_set(key, value)",
                        documentation: "Cache::set"
                    }
                ]
            };
        }
    });

    /* -----------------------------------------------------
       CREATE EDITOR
    ------------------------------------------------------ */
    const editor = monaco.editor.create(document.getElementById("editor"), {
        value: `print("Hello World!")`,
        language: "lua",
        theme: "amazingLuaTheme",
        fontSize: 16,
        fontFamily: "Consolas, 'Fira Code', monospace",
        automaticLayout: true,
        minimap: { enabled: false }
    });

    /* -----------------------------------------------------
       YOUR REQUEST:
       editor.updateOptions(...)
    ------------------------------------------------------ */
    editor.updateOptions({
        fontLigatures: true,
        smoothScrolling: true,
        cursorBlinking: "expand",
        roundedSelection: true,
        tabSize: 4,
        insertSpaces: true
    });

    // Make it accessible through window if needed
    window.updateOptions = (opts) => editor.updateOptions(opts);

});
</script>

</body>
</html>
